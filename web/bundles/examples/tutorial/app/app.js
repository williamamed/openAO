
angular.module("appTutorial", ["ngRoute","ngMaterial", "ngMessages"])
        .config(function($routeProvider, $locationProvider, $httpProvider) {


            $httpProvider.interceptors.push(function($q, $location) {
                return {
                    'request': function(config) {
                        
                        config.headers['X-Requested-With'] = 'XMLHttpRequest'
                        console.log(UIR)
                        UIR.load.show('Cargando....')
                        return config;
                    },
                    'responseError': function(rejection) {

                        UIR.load.hide()
                        if (!rejection.config.ignoreRequest && rejection.status == 404)
                            $location.path('/404')
                        if (!rejection.config.ignoreRequest && rejection.status == 401) {
                            UIR.load.show('Autenticaci√≥n detectada, redireccionando....')
                            window.location.href = Raptor.getRoute('/syntarsus/login?redirect=' + window.encodeURIComponent(document.URL))
                            return;
                        }

                        return $q.reject(rejection);
                    },
                    'response': function(response) {
                        // same as above
                        UIR.load.hide()
                        return response;
                    }
                };
            });

            $routeProvider
                    .when("/", {
                        template: '<div class="starter-template">' +
                                '<div class="starter-template">' +
                                '<input class="form-control" type="text" ng-model="nombre" placeholder="type something here ..">' +
                                '<h1>Angular - Bootstrap starter template,{{ nombre }}</h1>' +
                                '<p class="lead">Use this document as a way to quickly start any new project.<br> All you get is this text and a mostly barebones HTML document.<br>Generated by Raptor 3</p>' +
                                '</div>' +
                                '</div>'
                    })
                    .when("/personas", {
                        templateUrl: "panel/personas",
                        controller: "PersonasCtrl"
                    })
                    
                    .when('/404', {
                        template: "<h1>404</h1><p class='text-center'>La pagina solicitada no existe</p>"
                    })
                    .otherwise({redirectTo: '/404'});


        });



